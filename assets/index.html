<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Olop Launcher</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			font-family: Arial, sans-serif;
			background-color: #282c34;
			color: #fff;
			display: flex;
		}

		#launcher {
			width: 200px;
			height: 100vh;
			background-color: #333;
			color: #fff;
			padding: 20px;
			box-sizing: border-box;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: space-between;
		}

		h1 {
			font-size: 1.5em;
			margin: 0 0 10px 0;
		}

		ul {
			list-style: none;
			padding: 0;
			margin: 0;
		}

		li {
			margin-bottom: 10px;
		}

		#launcher a {
			color: #fff;
			text-decoration: none;
			font-size: 1.2em;
			display: block;
			padding: 5px;
			border-radius: 5px;
			transition: background-color 0.3s ease-in-out;
		}

		#launcher a:hover {
			background-color: #fff;
			color: #333;
		}

		#content {
			flex-grow: 1;
			padding: 20px;
		}

		#stop {
			color: red;
			font-weight: bold;
			margin-bottom: 20px;
		}
	</style>
        <script src="jquery.js"></script>
	<script type="text/javascript">
		var page = 0;
		$("#info1").hide();
		function install(){
		$("#content").html("<center>Arrêt...</center>");
    	$("#button-update").load("/actions/goupdate/");
    	setTimeout(function() {
       		window.close();
    		}, 1000);
		}

		function update(){
                        $("#content").load("home.html");
			setTimeout(function() {
                                $("#applist").load("Applist.html")
    		}, 200);
			$("#button-update").html("Recherche de mises à jours...")
					$("#info1").show("slide");
			$.ajax({
                                url:"http://olopsytems.000webhostapp.com/Checkupdate.php?ver=alpha-1.0" , data: {id : $(this).attr("id")} ,dataType: "text" , success: function(recup){
					console.log(recup);
					if(recup.indexOf("0")!==-1){
						$("#button-update").html("Aucune mise à jour disponible.<button onclick=\"mask(1);\">x</button>")
					}else
					{
						$("#button-update").html("Mise à jour disponible. Souhaitez-vous la télécharger ? <button onClick=\"install();\">Oui</button><button onclick=\"mask(1);\">Non</button>");
					}
				}, error: function (xhr, ajaxOptions, thrownError) {
					$("#button-update").html("Une erreur est survenue lors de la vérification de mises à jours, veuillez vérifier votre connexion internet.<button onclick=\"update();\">Rééssayer</button><button onclick=\"mask(1);\">x</button>"); //Ce code affichera le message d'erreur, ici Message d'erreur.
}
            });
		}

		function mask(message){
			$("#info"+message).hide("slide");
		}

		function loadpage(number){
			page=number;
			if(number==0){
				$("#content").load("home.html");
			setTimeout(function() {
                                $("#applist").load("Applist.html")
    		}, 200);
			}else if(number==1){
                                $("#content").load("Library.html")
			}else if(number==2){
                                $("#content").load("Store.html")
			}
		}
		function addapp(){
                $("#content").load("Library/Addapp.html");
	}
	</script>
</head>
<body onload="update();">
	<div id="launcher">
		<h1>Olop</h1>
		<div id="info1" style="background-color:blue;color:white;"><div id="button-update"></div></div><br>
		
                <ul class="menu">
			<li><a href="#" onclick="loadpage(0);">Accueil</a></li>
			<li><a href="#" onclick="loadpage(1);">Bibliothèque</a></li>
			<li><a href="#" onclick="loadpage(2);">Store</a></li>
		</ul>
		<a href="stop/"><div id="stop">Arrêt d'Olop</div></a>
	</div>
	<div id="content">
		<h1><-- Sélectionnez un menu</h1>
	</div>
</body>
</html>
